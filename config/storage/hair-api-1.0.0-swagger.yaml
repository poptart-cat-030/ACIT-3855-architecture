openapi: 3.0.3
info:
  description: This API receives hair data from hair salons around the world
  version: "1.0.0"
  title: Hair Salon API
  contact:
    email: hlam101@my.bcit.ca
paths:
  /hair/volume:
    get:
      summary: gets new hair volume readings
      operationId: app.get_hair_volume_readings
      description: Returns hair volume readings whose date_created value falls within the specified timestamps
      parameters:
        - name: start_timestamp
          in: query
          description: Start of the timespan
          schema:
            type: string
            example: "2025-09-04 21:12:33"
        - name: end_timestamp
          in: query
          description: End of the timespan
          schema:
            type: string
            example: "2025-09-04 22:12:33"
      responses:
        '200':
          description: Successfully returned a list of hair volume readings
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/HairVolumeReading'

        '400':
          description: Invalid request
          content:
            application/json:
              schema:
                type: object
                properties:   
                  message:
                    type: string
    
  /hair/type:
    get:
      summary: gets new hair type readings
      operationId: app.get_hair_type_readings
      description: Returns hair type readings whose date_created value falls within the specified timestamps
      parameters:
        - name: start_timestamp
          in: query
          description: Start of the timespan
          schema:
            type: string
            example: "2025-09-04 21:12:33"
        - name: end_timestamp
          in: query
          description: End of the timespan
          schema:
            type: string
            example: "2025-09-04 22:12:33"
      responses:
        '200':
          description: Successfully returned a list of hair type readings
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/HairTypeReading'

        '400':
          description: Invalid request
          content:
            application/json:
              schema:
                type: object
                properties:   
                  message:
                    type: string

  /health:
    get:
      summary: Check status of this service
      operationId: app.get_health
      description: Return status code 200 if this endpoint is triggered
      responses:
        '200':
          description: Service is running
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string

components:
  schemas:
    HairVolumeReading:
      required:
        - salon_id
        - salon_name
        - hair_volume
        - disposal_method
        - batch_timestamp
        - reading_timestamp
        - trace_id
      properties:
        salon_id:
          type: string
          format: uuid
          example: "a938-h38hs-29nlaq1-r48n17nd-3810"
        salon_name:
          type: string
          example: "Studio D Hair Salon and Barbershop"
        hair_volume:
          type: number
          description: Volume of hair cut (in grams)
          example: 10.56
        disposal_method:
          type: string
          description: How the hair was disposed of. Repurposing hair is considered "recycling". Disposal method of "compost" also includes the breaking down of hair at a facility to turn into fertilizer
          enum:
            - "garbage"
            - "recycling"
            - "compost"
            - "other"
        batch_timestamp:
          type: string
          example: "2025-09-04 21:12:33"
        reading_timestamp:
          type: string
          example: "2025-08-29 09:12:33"
        trace_id:
          type: string
          format: uuid
      type: object

    HairTypeReading:
      required:
        - salon_id
        - salon_name
        - hair_colour
        - hair_texture
        - hair_thickness
        - batch_timestamp
        - reading_timestamp
        - trace_id
      properties:
        salon_id:
          type: string
          format: uuid
          example: "a938-h38hs-29nlaq1-r48n17nd-3810"
        salon_name:
          type: string
          example: "Studio D Hair Salon and Barbershop"
        hair_colour:
          type: string
          example: "blonde"
        hair_texture:
          type: string
          description: hair texture/curliness based on this chart - https://www.onychair.com/wp-content/uploads/Different-Types-of-Hair-Type-Natural-Hair-Texture-Chart-Curl-Pattern-ONYC-Hair.webp
          example: "1c"
        hair_thickness:
          type: number
          example: 20
          description: hair thickness in micrometers - generally between 17-250
        batch_timestamp:
          type: string
          example: "2025-09-04 21:12:33"
        reading_timestamp:
          type: string
          example: "2025-08-29 09:12:33"
        trace_id:
          type: string
          format: uuid
      type: object